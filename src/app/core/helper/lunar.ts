export const lunarCalender = {
  minYear: 1891,
  maxYear: 2100,
  lunarInfo: [
    [0, 2, 9, 21936],
    [6, 1, 30, 9656],
    [0, 2, 17, 9584],
    [0, 2, 6, 21168],
    [5, 1, 26, 43344],
    [0, 2, 13, 59728],
    [0, 2, 2, 27296],
    [3, 1, 22, 44368],
    [0, 2, 10, 43856],
    [8, 1, 30, 19304],
    [0, 2, 19, 19168],
    [0, 2, 8, 42352],
    [5, 1, 29, 21096],
    [0, 2, 16, 53856],
    [0, 2, 4, 55632],
    [4, 1, 25, 27304],
    [0, 2, 13, 22176],
    [0, 2, 2, 39632],
    [2, 1, 22, 19176],
    [0, 2, 10, 19168],
    [6, 1, 30, 42200],
    [0, 2, 18, 42192],
    [0, 2, 6, 53840],
    [5, 1, 26, 54568],
    [0, 2, 14, 46400],
    [0, 2, 3, 54944],
    [2, 1, 23, 38608],
    [0, 2, 11, 38320],
    [7, 2, 1, 18872],
    [0, 2, 20, 18800],
    [0, 2, 8, 42160],
    [5, 1, 28, 45656],
    [0, 2, 16, 27216],
    [0, 2, 5, 27968],
    [4, 1, 24, 44456],
    [0, 2, 13, 11104],
    [0, 2, 2, 38256],
    [2, 1, 23, 18808],
    [0, 2, 10, 18800],
    [6, 1, 30, 25776],
    [0, 2, 17, 54432],
    [0, 2, 6, 59984],
    [5, 1, 26, 27976],
    [0, 2, 14, 23248],
    [0, 2, 4, 11104],
    [3, 1, 24, 37744],
    [0, 2, 11, 37600],
    [7, 1, 31, 51560],
    [0, 2, 19, 51536],
    [0, 2, 8, 54432],
    [6, 1, 27, 55888],
    [0, 2, 15, 46416],
    [0, 2, 5, 22176],
    [4, 1, 25, 43736],
    [0, 2, 13, 9680],
    [0, 2, 2, 37584],
    [2, 1, 22, 51544],
    [0, 2, 10, 43344],
    [7, 1, 29, 46248],
    [0, 2, 17, 27808],
    [0, 2, 6, 46416],
    [5, 1, 27, 21928],
    [0, 2, 14, 19872],
    [0, 2, 3, 42416],
    [3, 1, 24, 21176],
    [0, 2, 12, 21168],
    [8, 1, 31, 43344],
    [0, 2, 18, 59728],
    [0, 2, 8, 27296],
    [6, 1, 28, 44368],
    [0, 2, 15, 43856],
    [0, 2, 5, 19296],
    [4, 1, 25, 42352],
    [0, 2, 13, 42352],
    [0, 2, 2, 21088],
    [3, 1, 21, 59696],
    [0, 2, 9, 55632],
    [7, 1, 30, 23208],
    [0, 2, 17, 22176],
    [0, 2, 6, 38608],
    [5, 1, 27, 19176],
    [0, 2, 15, 19152],
    [0, 2, 3, 42192],
    [4, 1, 23, 53864],
    [0, 2, 11, 53840],
    [8, 1, 31, 54568],
    [0, 2, 18, 46400],
    [0, 2, 7, 46752],
    [6, 1, 28, 38608],
    [0, 2, 16, 38320],
    [0, 2, 5, 18864],
    [4, 1, 25, 42168],
    [0, 2, 13, 42160],
    [10, 2, 2, 45656],
    [0, 2, 20, 27216],
    [0, 2, 9, 27968],
    [6, 1, 29, 44448],
    [0, 2, 17, 43872],
    [0, 2, 6, 38256],
    [5, 1, 27, 18808],
    [0, 2, 15, 18800],
    [0, 2, 4, 25776],
    [3, 1, 23, 27216],
    [0, 2, 10, 59984],
    [8, 1, 31, 27432],
    [0, 2, 19, 23232],
    [0, 2, 7, 43872],
    [5, 1, 28, 37736],
    [0, 2, 16, 37600],
    [0, 2, 5, 51552],
    [4, 1, 24, 54440],
    [0, 2, 12, 54432],
    [0, 2, 1, 55888],
    [2, 1, 22, 23208],
    [0, 2, 9, 22176],
    [7, 1, 29, 43736],
    [0, 2, 18, 9680],
    [0, 2, 7, 37584],
    [5, 1, 26, 51544],
    [0, 2, 14, 43344],
    [0, 2, 3, 46240],
    [4, 1, 23, 46416],
    [0, 2, 10, 44368],
    [9, 1, 31, 21928],
    [0, 2, 19, 19360],
    [0, 2, 8, 42416],
    [6, 1, 28, 21176],
    [0, 2, 16, 21168],
    [0, 2, 5, 43312],
    [4, 1, 25, 29864],
    [0, 2, 12, 27296],
    [0, 2, 1, 44368],
    [2, 1, 22, 19880],
    [0, 2, 10, 19296],
    [6, 1, 29, 42352],
    [0, 2, 17, 42208],
    [0, 2, 6, 53856],
    [5, 1, 26, 59696],
    [0, 2, 13, 54576],
    [0, 2, 3, 23200],
    [3, 1, 23, 27472],
    [0, 2, 11, 38608],
    [11, 1, 31, 19176],
    [0, 2, 19, 19152],
    [0, 2, 8, 42192],
    [6, 1, 28, 53848],
    [0, 2, 15, 53840],
    [0, 2, 4, 54560],
    [5, 1, 24, 55968],
    [0, 2, 12, 46496],
    [0, 2, 1, 22224],
    [2, 1, 22, 19160],
    [0, 2, 10, 18864],
    [7, 1, 30, 42168],
    [0, 2, 17, 42160],
    [0, 2, 6, 43600],
    [5, 1, 26, 46376],
    [0, 2, 14, 27936],
    [0, 2, 2, 44448],
    [3, 1, 23, 21936],
    [0, 2, 11, 37744],
    [8, 2, 1, 18808],
    [0, 2, 19, 18800],
    [0, 2, 8, 25776],
    [6, 1, 28, 27216],
    [0, 2, 15, 59984],
    [0, 2, 4, 27424],
    [4, 1, 24, 43872],
    [0, 2, 12, 43744],
    [0, 2, 2, 37600],
    [3, 1, 21, 51568],
    [0, 2, 9, 51552],
    [7, 1, 29, 54440],
    [0, 2, 17, 54432],
    [0, 2, 5, 55888],
    [5, 1, 26, 23208],
    [0, 2, 14, 22176],
    [0, 2, 3, 42704],
    [4, 1, 23, 21224],
    [0, 2, 11, 21200],
    [8, 1, 31, 43352],
    [0, 2, 19, 43344],
    [0, 2, 7, 46240],
    [6, 1, 27, 46416],
    [0, 2, 15, 44368],
    [0, 2, 5, 21920],
    [4, 1, 24, 42448],
    [0, 2, 12, 42416],
    [0, 2, 2, 21168],
    [3, 1, 22, 43320],
    [0, 2, 9, 26928],
    [7, 1, 29, 29336],
    [0, 2, 17, 27296],
    [0, 2, 6, 44368],
    [5, 1, 26, 19880],
    [0, 2, 14, 19296],
    [0, 2, 3, 42352],
    [4, 1, 24, 21104],
    [0, 2, 10, 53856],
    [8, 1, 30, 59696],
    [0, 2, 18, 54560],
    [0, 2, 7, 55968],
    [6, 1, 27, 27472],
    [0, 2, 15, 22224],
    [0, 2, 5, 19168],
    [4, 1, 25, 42216],
    [0, 2, 12, 42192],
    [0, 2, 1, 53584],
    [2, 1, 21, 55592],
    [0, 2, 9, 54560],
  ],
  //Is it a leap year?
  isLeapYear: (year) =>
    (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0,

  //Zodiac year
  lunarYear: (year) => {
    const gan = ['Geng', 'Xin', 'Ren', 'Gan', 'A', 'B', 'B', 'D', 'E', 'J'];
    const zhi = [
      '申',
      '酉',
      '戌',
      '海',
      '子',
      'ugly',
      'yin',
      '卯',
      'chen',
      '巳',
      '午',
      '未',
    ];
    const str = year.toString().split('');
    return gan[str[3]] + zhi[year % 12];
  },
  //Chinese zodiac year
  zodiacYear: (year) => {
    const zodiac = [
      'monkey',
      'chicken',
      'dog',
      'pig',
      'rat',
      'cow',
      'tiger',
      'rabbit',
      'dragon',
      'snake',
      'horse',
      'sheep ',
    ];
    return zodiac[year % 12];
  },
  //Number of days in Gregorian calendar month
  //@param year Gregorian calendar-year
  //@param month Gregorian calendar-month
  solarMonthDays: function (year, month) {
    var FebDays = this.isLeapYear(year) ? 29 : 28;
    var monthHash = ['', 31, FebDays, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    return monthHash[month];
  },
  //Number of days in lunar month
  lunarMonthDays: function (year, month) {
    var monthData = this.lunarMonths(year);
    return monthData[month - 1];
  },
  //Array of days in lunar month
  lunarMonths: function (year) {
    var yearData = this.lunarInfo[year - this.minYear];
    var leapMonth = yearData[0];
    var bit = (+yearData[3]).toString(2);
    var months = [];
    for (var i = 0; i < bit.length; i++) {
      months[i] = bit.substr(i, 1);
    }

    for (var k = 0, len = 16 - months.length; k < len; k++) {
      months.unshift('0');
    }

    months = months.slice(0, leapMonth == 0 ? 12 : 13);
    for (var i = 0; i < months.length; i++) {
      months[i] = +months[i] + 29;
    }
    return months;
  },
  //Number of days per year in the lunar calendar
  //@param year lunar year
  lunarYearDays: function (year) {
    var monthArray = this.lunarYearMonths(year);
    var len = monthArray.length;
    return monthArray[len - 1] == 0 ? monthArray[len - 2] : monthArray[len - 1];
  },
  //
  lunarYearMonths: function (year) {
    var monthData = this.lunarMonths(year);
    var res = [];
    var temp = 0;
    var yearData = this.lunarInfo[year - this.minYear];
    var len = yearData[0] == 0 ? 12 : 13;
    for (var i = 0; i < len; i++) {
      temp = 0;
      for (let j = 0; j <= i; j++) {
        temp += monthData[j];
      }
      res.push(temp);
    }
    return res;
  },
  //Get leap month
  //@param year lunar year
  leapMonth: function (year) {
    var yearData = this.lunarInfo[year - this.minYear];
    return yearData[0];
  },
  //Calculate the number of days between the lunar calendar date and the first day of the first month
  betweenLunarDays: function (year, month, day) {
    var yearMonth = this.lunarMonths(year);
    var res = 0;
    for (var i = 1; i < month; i++) {
      res += yearMonth[i - 1];
    }
    res += day - 1;
    return res;
  },
  //Calculate the number of days between 2 Gregorian calendar dates
  //@param year Gregorian calendar year
  //@param month
  //@param day
  //@param l_month The solar calendar month corresponding to the first month of the lunar calendar
  //@param l_day The solar day corresponding to the first day of the lunar calendar
  betweenSolarDays: function (year, month, day, l_month, l_day) {
    var time1 = new Date(year + '-' + month + '-' + day).getTime(),
      time2 = new Date(year + '-' + l_month + '-' + l_day).getTime();
    return Math.ceil((time1 - time2) / 24 / 3600 / 1000);
  },
  //Calculate the lunar date based on the number of days from the first day of the first month
  //@param year Gregorian calendar year
  //@param between days
  lunarByBetween: function (year, between) {
    var lunarArray = '',
      yearMonth = [],
      t = 0,
      e = 0,
      leapMonth = 0,
      m = '';
    if (between == 0) {
      t = 1;
      e = 1;
      m = 'First month';
    } else {
      year = between > 0 ? year : year - 1;
      yearMonth = this.lunarYearMonths(year);
      leapMonth = this.leapMonth(year);
      between = between > 0 ? between : this.lunarYearDays(year) + between;
      for (var i = 0; i < 13; i++) {
        if (between == yearMonth[i]) {
          t = i + 2;
          e = 1;
          break;
        } else if (between < yearMonth[i]) {
          t = i + 1;
          e = between - (yearMonth[i - 1] ? yearMonth[i - 1] : 0) + 1;
          break;
        }
      }

      m =
        leapMonth != 0 && t == leapMonth + 1
          ? this.chineseMonth(t - 1)
          : this.chineseMonth(leapMonth != 0 && leapMonth + 1 < t ? t - 1 : t);
    }
    lunarArray += e + '-' + t + '-' + year; //year, month, day
    // lunarArray.push(
    //   this.lunarYear(year),
    //   this.zodiacYear(year),
    //   m,
    //   this.chineseNumber(e)
    // ); //Zodiac year, month and day
    // lunarArray.push(leapMonth); //leap months
    return lunarArray;
  },
  //Chinese month
  chineseMonth: function (month) {
    var monthHash = [
      '',
      'First month',
      'February',
      'March',
      'April',
      'May',
      'June',
      'July',
      'August',
      'September',
      'October',
      'Winter Moon',
      'Twelfth Moon',
    ];
    return monthHash[month];
  },
  //Chinese date
  chineseNumber: function (num) {
    let res;
    var dateHash = [
      '',
      'one',
      'two',
      'three',
      'four',
      'five',
      'six',
      'seven',
      'eight',
      'nine',
      'ten',
    ];
    if (num <= 10) {
      res = '初' + dateHash[num];
    } else if (num > 10 && num < 20) {
      res = '十' + dateHash[num - 10];
    } else if (num == 20) {
      res = 'twenty';
    } else if (num > 20 && num < 30) {
      res = 'Twenty' + dateHash[num - 20];
    } else if (num == 30) {
      res = 'Thirty';
    }
    return res;
  },
  //Convert the lunar calendar
  toLunar: function (year, month, day) {
    var yearData = this.lunarInfo[year - this.minYear];
    if (year == this.minYear && month <= 2 && day <= 9) {
      return [1891, 1, 1, 'xinmao', 'rabbit', 'first month', 'first day'];
    }
    return this.lunarByBetween(
      year,
      this.betweenSolarDays(year, month, day, yearData[1], yearData[2])
    );
  },
  //Convert Gregorian calendar
  //@param year lunar calendar-year
  //@param month Lunar month-month, leap month processing: for example, if the year is leap in May, then the second May will be passed on to June, which is equivalent to 13 months in the lunar calendar
  //@param date lunar calendar-day
  toSolar: function (year, month, day) {
    var yearData = this.lunarInfo[year - this.minYear];
    var between = this.betweenLunarDays(year, month, day);
    var ms = new Date(year + '-' + yearData[1] + '-' + yearData[2]).getTime();
    var s = ms + between * 24 * 60 * 60 * 1000;
    var d = new Date();
    d.setTime(s);
    year = d.getFullYear();
    month = d.getMonth() + 1;
    day = d.getDate();
    return [year, month, day];
  },
};
